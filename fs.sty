\usepackage[utf8]{inputenc}


\usepackage[left=5mm, right=5mm, bottom=5mm, top=5mm]{geometry}
\usepackage{lastpage}
\usepackage[explicit]{titlesec}
\usepackage{bm}

\usepackage{titling}
\usepackage{calc}
\usepackage{fancyhdr}
\usepackage[table,cmyk]{xcolor}
\usepackage{enumitem}
\setlist{nolistsep, leftmargin = 4mm}
% \setlist[enumerate]{label=(\roman*)}

\newlist{enumerateroman}{enumerate}{1}
\setlist[enumerateroman]{label=(\roman*)}

\usepackage{multicol}
\usepackage{adjustbox}
\usepackage{supertabular}
\usepackage{multirow}
\usepackage{csvsimple}
\usepackage{colortbl}

\usepackage{textcomp}
\usepackage{amsmath}
\usepackage{esint}
\usepackage{amssymb}    % \cdots
\usepackage{commath}
\usepackage{cancel}     % strike-through terms
\usepackage{gensymb}
\usepackage{empheq}
\usepackage{aligned-overset}
\usepackage{mathtools}

\usepackage[hidelinks,pdftex]{hyperref}

\usepackage{tikz}
\usepackage{pgfplots}
\usetikzlibrary{positioning, calc, fit, matrix, decorations, angles, quotes, babel, 3d, arrows.meta, shadings, shapes.geometric}
\usepgfplotslibrary{groupplots}
\usepackage{wrapfig}
\usepackage[most]{tcolorbox}

% pgfplot layers
\pgfplotsset{compat=1.7}                                                                % Version? fÃ¼r Plots  
\pgfdeclarelayer{bg}
\pgfdeclarelayer{l1}
\pgfdeclarelayer{l2}
\pgfdeclarelayer{l3}
\pgfdeclarelayer{tl1}
\pgfdeclarelayer{tl2}
\pgfdeclarelayer{tl3}
\pgfsetlayers{bg,l3,l2,l1,main,tl1,tl2,tl3}

% custom colors
\definecolor{darkgreen}{HTML}{008E00}
\definecolor{darkred}{HTML}{990000}
\definecolor{mred}{HTML}{e60000}
\definecolor{burntorange}{HTML}{ff9a00}
\definecolor{darkblue}{HTML}{000099}
\definecolor{lightblue}{HTML}{99d6ff}
\definecolor{lightgray}{HTML}{A9A9A9}
\definecolor{darkyellow}{HTML}{FED600}
\definecolor{limegreen}{HTML}{3ae32b}
\definecolor{pastelmoss}{HTML}{A0C1B8}
\definecolor{pastelaqua}{HTML}{709FB0}
\definecolor{pastelviolet}{HTML}{726a95}

\definecolor{primaryheader}{cmyk}{0.1,0.2,0.2,1}
\definecolor{secondaryheader}{cmyk}{0,0.2,0.2,0.95}
\definecolor{thirdheader}{cmyk}{0,0.2,0.2,0.95}

\definecolor{definitioncolor}{cmyk}{0.6,1,0.8,0}
\definecolor{lemmacolor}{cmyk}{1,0.7,0,0}
\definecolor{overlaycolor}{cmyk}{0,0.5,0.5,0}
% ACDB95

\definecolor{mathHighlightColor}{cmyk}{0,0.3,1,0}

\renewcommand{\title}[1]{\newcommand{\themaintitle}{#1}}
% \newcommand{\subtitle}[1]{\newcommand{\thesubtitle}{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\newcommand{\wrongArg}{\text{\textcolor{red}{\textbf{Wrong Argument}}}}
\newcommand{\parenth}[2]{\ifstrequal{#1}{normal}{( #2 )}{\ifstrequal{#1}{dynamic}{\left( #2\right)}{\wrongArg}}}
\newcommand{\brackets}[2]{\ifstrequal{#1}{normal}{[ #2 ]}{\ifstrequal{#1}{dynamic}{\left[ #2\right]}{\wrongArg}}}

\DeclareMathSymbol{\mlq}{\mathrel}{operators}{``}
\DeclareMathSymbol{\mrq}{\mathrel}{operators}{`'}
\DeclareMathSymbol{\mlqq}{\mathrel}{operators}{"5C}
\DeclareMathSymbol{\mrqq}{\mathrel}{operators}{`"}

\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}

\newcommand{\sequence}[1][a]{(#1_n)_{n \geq 1}}
\newcommand{\funcsequence}[1][f]{(#1_n)_{n \geq 0}}

\DeclareTextFontCommand{\emph}{\bfseries\boldmath}
\newcommand{\impemph}[1]{\textcolor{mred}{\bfseries\boldmath #1}}

\newcommand{\range}[2]{\rangeInner{#1}{1}{#2}}
\newcommand{\rangeInner}[3]{$ #1_{#2} , \ldots , #1_{#3}$}

\newcommand{\rangeWsM}[2][1]{#1 , \ldots , #2}

\DeclareMathOperator{\card}{card}
\DeclareMathOperator{\real}{Re}
\DeclareMathOperator{\imaginary}{Im}
\DeclareMathOperator{\arcosh}{arccosh}
\DeclareMathOperator{\arsinh}{arcsinh}
\DeclareMathOperator{\artanh}{arctanh}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\grad}{grad}

\newcommand{\oof}{\mathcal{O}}

\tikzset{>=stealth,
	overlaynote/.style={font = \footnotesize, fill = overlaycolor, draw = overlaycolor, rounded corners = 3pt},
	overlayarrow/.style={thick, gray, ->}
}

\tcbset{
	before=\par\noindent, 
	after=\par,
	important/.style={
		leftrule=1mm,
		rightrule=1mm,
		colframe = red
	},
	basicbox/.style = {
		enhanced,
		top=0.5mm,
		bottom=0.5mm,
		left=1mm,
		right=1mm,
		colback=white,
		boxrule=0pt,
		leftrule=1mm,
		arc=1mm,
	},
	headerdef/.style={
		fonttitle=\sffamily\bfseries\boldmath,
		detach title,
		before upper={\tcbtitle\quad},
	},
	lemmacore/.style={
		basicbox,
		colframe = lemmacolor
	}
}

\newtcbox{\mathhighlight}[1][]{%
    nobeforeafter, 
    math upper, 
    tcbox raise base,
    enhanced, 
    colback=mathHighlightColor!60, 
    boxrule=0pt,
    left=1mm,
    right=1mm,
    top=0.5mm,
    bottom=0.5mm,
    #1}

\newtcbox{\inlineieq}[1][]{%
    nobeforeafter, 
    math upper, 
    tcbox raise base,
    enhanced,  
    colback=mathHighlightColor!60, 
    boxrule=0pt,
    arc=3pt, 
    left=0mm,
    right=0mm,
    top=0mm,
    bottom=0mm,
    #1}


\newenvironment{iequation}[1][equation*]{%
    \empheq[box={\mathhighlight}]{#1}}{\endempheq}


\newtcolorbox{definition}[2][]{
	basicbox,
	headerdef,
	adjusted title =#2,
	coltitle = definitioncolor,
	colframe = definitioncolor,
	subtitle style={
	  boxrule=0pt,
	  colback=white,
	  colframe = white,
	  coltitle = black,
	},
    #1
}

\newtcolorbox{theorem}[2][]{
	basicbox,
	headerdef,
	adjusted title = #2,
	coltitle = lemmacolor,
	colframe = lemmacolor,
    #1
}

% should be removed
\newtcolorbox{thrm}[2][]{
    adjusted title = S#2,
    fonttitle=\sffamily\bfseries\boldmath,
    detach title,before upper={\tcbtitle\quad},
    coltitle = black,
    colback=BaliHai!40,
    top=0.5mm,
    bottom=0.5mm,
    boxrule=0pt,
    #1
}

\newtcolorbox{lemma}[2][]{
	basicbox,
	headerdef,
	adjusted title = #2,
	coltitle = lemmacolor,
	colframe = lemmacolor,
    #1
}
\newtcolorbox{corollary}[2][]{
	basicbox,
	headerdef,
	adjusted title = #2,
	coltitle = lemmacolor,
	colframe = lemmacolor,
    #1
}

\newtcolorbox{highlight}[1]{
	basicbox,
	headerdef,
	adjusted title = #1,
	coltitle = black,
	breakable,
	colback=mathHighlightColor!60,
	boxrule=0pt,
	subtitle style={
	  boxrule=0pt,
	  colback=mathHighlightColor!40,
	  colframe = mathHighlightColor!60
	}
}

\newtcolorbox{example}[1][]{
	basicbox,
	colframe= gray,
	% watermark text = Example,
	fontupper = \small,
	fontlower = \small,
    #1
}

\newcommand{\createtitlepagestyle}{
    \fancypagestyle{TitlePageStyle}{
%        \thispagestyle{empty}
    }
}

\newcommand{\createmainpagestyle}{
    \fancypagestyle{main}{
        \fancyhf{}
        % \rfoot{Seite \thepage \protect{ }von \pageref{LastPage}}
        \renewcommand{\headrulewidth}{0pt}
        \renewcommand{\footrulewidth}{0pt}
    }
}

\newcommand{\overrideplainstyle}{
    \fancypagestyle{plain}{
        \fancyhf{}
        \rfoot{Seite \thepage \protect{ }von \pageref{LastPage}}
        \renewcommand{\headrulewidth}{0pt}
        \renewcommand{\footrulewidth}{0pt}
    }
}

\renewcommand{\maketitle}{
    \begin{center}
        \sffamily
        \begin{tabular}{l C{35mm} r}
            Prof. M. Burger & \multirow{2}{*}{\LARGE \textbf{\themaintitle}} & \theauthor\\
            \today & & ascheuer@student.ethz.ch
        \end{tabular}
    \end{center}
}

\setlength{\columnseprule}{1pt}
\def\columnseprulecolor{\color{black!20!white}}

\newcommand{\raisedrulefill}[2][0ex]{\leaders\hbox{\rule[#1]{1pt}{#2}}\hfill}

\titleformat{\section}{\sffamily\bfseries\boldmath\large}{}{0pt}{\colorbox{primaryheader}{\parbox[c][3mm]{\linewidth - 6pt}{\textcolor{white}{#1}}}}
\titleformat{\subsection}{\sffamily\bfseries\boldmath}{}{0pt}{\colorbox{secondaryheader}{\textcolor{white}{#1}}}
\titleformat{\subsubsection}{\sffamily\bfseries\boldmath}{}{0pt}{\textcolor{thirdheader}{#1 \raisedrulefill[0.4ex]{0.5pt}}}
\titleformat{\paragraph}[runin]{\sffamily\bfseries\boldmath}{}{0pt}{\uline{#1}}

\setlength\parindent{0pt}
\titlespacing{\section}{0pt}{0pt}{0pt}
\titlespacing{\subsection}{0pt}{0pt}{0pt}
\titlespacing{\subsubsection}{0pt}{0pt}{0pt}
% \setlength{\jot}{0pt}
